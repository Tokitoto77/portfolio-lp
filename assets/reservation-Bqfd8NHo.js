import"./style-BchAeMK8.js";document.addEventListener("DOMContentLoaded",()=>{const s=new URLSearchParams(window.location.search),c=s.get("date"),i=s.get("time"),n=s.get("class"),l=s.get("type"),u=document.getElementById("date-time"),o=document.getElementById("course");c&&i&&(u.value=`${c} ${i}`),l==="trial"?o.value="trial":n&&(n.includes("マット")?o.value="mat":n.includes("マシン")?o.value="machine":n.includes("ミックス")&&(o.value="mix"));const r=document.getElementById("reservation-form"),f=document.getElementById("form-wrapper"),m=document.getElementById("thanks-message");r.addEventListener("submit",async y=>{y.preventDefault();const a=r.querySelector('button[type="submit"]'),h=a.innerText;a.innerText="送信中...",a.disabled=!0;const g=new FormData(r),e={};if(g.forEach((t,v)=>e[v]=t),e.date_time&&!e.date_time.includes("年")&&!e.date_time.match(/\d{4}\//)){new Date().getFullYear();const t=2026;e.date_time=`${t}/${e.date_time}`}const d={trial:"初回体験（60分）",mat:"マットピラティス",machine:"マシンピラティス",mix:"ミックス"};d[e.course]&&(e.course=d[e.course]);const p="https://script.google.com/macros/s/AKfycbybNvoJzzOcr5kuqfTMjkPEkVj2hTAsGWIv0Wf8qJIRVqL0H02saeyG4EQQlXXQhDs/exec";try{await fetch(p,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(e)}),f.style.display="none",m.classList.add("visible"),m.scrollIntoView({behavior:"smooth"})}catch(t){console.error("Submission Error:",t),alert("送信エラー: "+t.message+`
(GASの設定やネットワークを確認してください)`),a.innerText=h,a.disabled=!1}})});
