import"./style-BchAeMK8.js";const y="https://script.google.com/macros/s/AKfycbyGkz77EQI9Ag8YcwIMi6WGNvnzzOSAoBX9cPzVAUpKeiuiGDqlIuK80gzAkTgSipc/exec";document.addEventListener("DOMContentLoaded",()=>{E()});async function E(){const s=document.getElementById("schedule-body");if(s){s.innerHTML='<tr><td colspan="5" style="text-align:center; padding: 2rem;">読み込み中...</td></tr>';try{const t=await(await fetch(y)).json();T(t,s)}catch(n){console.error("Error fetching schedule:",n);let t="スケジュールの読み込みに失敗しました。";n.message.includes("Failed to fetch")&&(t+="<br><small>※アクセスがブロックされました。Google Apps Scriptのデプロイ設定（全員に公開）を確認してください。</small>"),s.innerHTML=`<tr><td colspan="5" style="text-align:center; padding: 2rem; color: #d9534f;">${t}</td></tr>`}}}function T(s,n){if(n.innerHTML="",!s||s.length===0){n.innerHTML='<tr><td colspan="5" style="text-align:center; padding: 2rem;">現在予定されているレッスンはありません。</td></tr>';return}const t={};s.forEach(a=>{const c=`${a.date} (${a.weekDay})`;t[c]||(t[c]=[]),t[c].push(a)});let h=0;Object.keys(t).forEach(a=>{const c=t[a],i=h%2!==0?"bg-gray":"";c.forEach((e,g)=>{const l=document.createElement("tr");if(g===0){const d=document.createElement("td");d.rowSpan=c.length,d.className=`date-cell ${i}`,d.textContent=a,l.appendChild(d)}const u=document.createElement("td");u.className=i,u.textContent=`${e.startTime} - ${e.endTime}`,l.appendChild(u);const m=document.createElement("td");m.className=i;let o="basic";e.type.includes("マシン")?o="machine":e.type.includes("ミックス")?o="mix":e.type.includes("マット")&&(o="basic"),m.innerHTML=`
        <span class="class-tag ${o}">${e.type}</span>
        ${e.title}
      `,l.appendChild(m);const f=document.createElement("td");f.className=i;let r="";e.status.includes("◎")?r='<span class="status-ok">◎</span>':e.status.includes("△")?r='<span class="status-few">△</span>':e.status.includes("×")||e.status.includes("満")?r='<span class="status-full">×</span>':r=`<span>${e.status}</span>`,f.innerHTML=r,l.appendChild(f);const p=document.createElement("td");if(p.className=i,e.status.includes("×")||e.status.includes("満"))p.innerHTML='<span class="text-disabled">満席</span>';else{const d=new URLSearchParams({date:e.date,time:e.startTime,class:e.type});p.innerHTML=`<a href="reservation.html?${d.toString()}" class="btn-book">予約</a>`}l.appendChild(p),n.appendChild(l)}),h++})}
